# Number

## 浮点数精度

计算机是二进制的，并且表示数字有位数限制，无法精确表示无限小数，因此判断数学上相等不能用 `===` 运算符。
即使在十进制看来的有限数字，转化为二进制可能就变成了无限小数。

解决方法是判断两数相减的绝对值小于最小精度：

```js
Math.abs(a - b) < Number.EPSILON;
```

## 特殊值

### NaN

- 涉及 `NaN` 的操作都会返回 `NaN`
- `NaN !== NaN`，唯一一个不等于自身的值
- `window.isNaN` 将值转化为数字（包括对象）判断是否是 `NaN`，`Number.isNaN` 是否是 `NaN`

### 最大值/最小值

浮点数最大值：`Number.MAX_VALUE 约等于 1.8e+308`
浮点数最小值：`Number.MIN_VALUE = 5e-324`
最大安全整数：`Number.MAX_SAFE_INTEGER`，超过此数计算可能出错。

### +0/-0/+Infinity/-Infinity

```js
1 / 0 = Infinity
1 / -0 = -Infinity
Number.isFinite 判断是否 Infinity
Number.POSITIVE_INFINITY = Infinity
Number.NEGATIVE_INFINITY = -Infinity
```

## 字符串转化为数字

将字符串转为数字的方法有 3 种

1. 使用`Number`对字符串进行类型转换；
2. 使用`parseInt`将字符串转换为整数；
3. 使用`parseFloat`将字符串转换为整数或浮点数。

### Number / +

`Number`对字符串进行类型转换。

- 将空字符转换为数字 `0`
- 忽略首尾部空格
- 识别小数和科学技术法
- 字符串中不能出现非法字符

### parseInt

`parseInt` 方法将字符串转化为整数

- 空字符转换为 `NaN`
- 忽略首尾部空格
- 不识别小数点和科学计数法
- 忽略数字后的非法字符

`parseInt` 还支持第二个参数表示转换基数，也就是进制数

```js
parseInt(11, 2); // 3
```

### parseFloat

`parseFloat`方法将字符串转换为数字

- 将空字符转换为 NaN
- 忽略首尾部空格
- 识别小数和科学计数法
- 忽略数字后的非法字符

### 对比

| 方法       | 识别.字符 | 识别 e 字符 | 空字符 | 首尾部空格 | 非法字符    |
| ---------- | --------- | ----------- | ------ | ---------- | ----------- |
| Number     | true      | true        | 0      | 忽略       | 转化为`NaN` |
| parseInt   | false     | false       | NaN    | 忽略       | 忽略        |
| parseFloat | true      | true        | NaN    | 忽略       | 忽略        |

### 例子

| 情况               | 例子   | Number  | parseInt | parseFloat |
| ------------------ | ------ | ------- | -------- | ---------- |
| 空字符             | ""     | 0       | **NaN**  | **NaN**    |
| 整数               | "10"   | 10      | 10       | 10         |
| 数字后方有非法字符 | "1 只" | **NaN** | 1        | 1          |
| 空格在前方         | " 10"  | 10      | 10       | 10         |
| 空格在中间         | "1 1"  | **NaN** | 1        | 1          |
| 空格在末尾         | "10 "  | 10      | 10       | 10         |
| 以 0 开头          | "01"   | 1       | 1        | 1          |
| 小数               | "0.1"  | 0.1     | 0        | 0.1        |
| 小数点开头         | ".1"   | 0.1     | **NaN**  | 0.1        |
| 含有"e"            | "2e1"  | 20      | **2**    | 20         |
| "e"开头            | "e1"   | **NaN** | **NaN**  | **NaN**    |
| "e"结尾            | "1e"   | **NaN** | 1        | 1          |

对其中几种特殊情况解答：

1. 首尾部空格会被忽略，字符串中间的空格会被识别为非法字符，所以`Number('1 1') = NaN`
2. 对于".1"，由于`parseInt`不识别小数点，第一个字符非法，转换为`NaN`
3. 对于"2e1"，由于`parseInt`不识别`e`，忽略`e`及之后字符，转换为`2`
4. 对于"e1"，由于不包含科学计数法的底数，`e`被识别为非法字符，全部转换为`NaN`
5. 对于"1e"，由于不包含科学计数法的指数，`e`被识别为非法字符，因此被`Number`转换为`NaN`，`parseInt`和`parseFloat`忽略`e`，转换为`1`

## 对象转化为数字

- 首先调用
